name: Run Specs On macOS
on: [push, pull_request]

jobs:
  cross_compile_windows_obj:
    name: Build Crystal Windows Object
    runs-on: macos-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v1
      - name: Set env
        run: |
          echo ::set-env name=CURRENT_TAG::$(echo ${GITHUB_REF:10})
          export PATH="/usr/local/opt/llvm/bin:$PATH"
      - name: Prepare system
        run: |          
          bin/ci prepare_system
      - name: Build
        run: |          
          export PKG_CONFIG_PATH="$PKG_CONFIG_PATH:/usr/local/opt/openssl/lib/pkgconfig"          
          bin/ci prepare_build
          bin/ci build
